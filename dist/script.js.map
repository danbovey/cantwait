{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/downsample-lttb/index.js","webpack:///./node_modules/social-share-kit/dist/js/social-share-kit.min.js","webpack:///./src/filter.js","webpack:///./src/script.js","webpack:///./src/scss/style.scss","webpack:///./src/waveform.js"],"names":["require","createWaveform","SocialShareKit","init","widgets","document","querySelectorAll","forEach","call","widget","SC","Widget","el","querySelector","trackArtwork","trackTitle","trackWaveform","trackPermalink","btnPlay","iconPlay","iconPause","btnSharer","sharer","displayTrack","artwork","track","artwork_url","replace","setAttribute","title","permalink","permalink_url","textContent","window","fetch","waveform_url","then","res","json","wave","addEventListener","shareLinks","text","indexOf","link","dataset","url","image","bind","Events","READY","getCurrentSound","PLAY","style","display","PAUSE","PLAY_PROGRESS","bars","filled","Math","ceil","length","player","relativePosition","i","background","color","toggle","downsampler","waveform","hasChildNodes","removeChild","lastChild","maxBars","round","offsetWidth","samples","map","s","processData","bar","createElement","classList","add","height","sample","appendChild","module","exports"],"mappings":"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","file":"script.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/script.js\");\n","module.exports.processData = function(series, threshold) {\r\n\treturn largestTriangleThreeBuckets(series, threshold);\r\n}\r\n\r\nvar floor = Math.floor,\r\n\tabs = Math.abs;\r\n\r\nfunction largestTriangleThreeBuckets(data, threshold) {\r\n\r\n\tvar data_length = data.length;\r\n\tif (threshold >= data_length || threshold === 0) {\r\n\t\treturn data; // Nothing to do\r\n\t}\r\n\r\n\tvar sampled = [],\r\n\t\tsampled_index = 0;\r\n\r\n\t// Bucket size. Leave room for start and end data points\r\n\tvar every = (data_length - 2) / (threshold - 2);\r\n\r\n\tvar a = 0,  // Initially a is the first point in the triangle\r\n\t\tmax_area_point,\r\n\t\tmax_area,\r\n\t\tarea,\r\n\t\tnext_a;\r\n\r\n\tsampled[ sampled_index++ ] = data[ a ]; // Always add the first point\r\n\r\n\tfor (var i = 0; i < threshold - 2; i++) {\r\n\r\n\t\t// Calculate point average for next bucket (containing c)\r\n\t\tvar avg_x = 0,\r\n\t\t\tavg_y = 0,\r\n\t\t\tavg_range_start  = floor( ( i + 1 ) * every ) + 1,\r\n\t\t\tavg_range_end    = floor( ( i + 2 ) * every ) + 1;\r\n\t\tavg_range_end = avg_range_end < data_length ? avg_range_end : data_length;\r\n\r\n\t\tvar avg_range_length = avg_range_end - avg_range_start;\r\n\r\n\t\tfor ( ; avg_range_start<avg_range_end; avg_range_start++ ) {\r\n\t\t  avg_x += data[ avg_range_start ][ 0 ] * 1; // * 1 enforces Number (value may be Date)\r\n\t\t  avg_y += data[ avg_range_start ][ 1 ] * 1;\r\n\t\t}\r\n\t\tavg_x /= avg_range_length;\r\n\t\tavg_y /= avg_range_length;\r\n\r\n\t\t// Get the range for this bucket\r\n\t\tvar range_offs = floor( (i + 0) * every ) + 1,\r\n\t\t\trange_to   = floor( (i + 1) * every ) + 1;\r\n\r\n\t\t// Point a\r\n\t\tvar point_a_x = data[ a ][ 0 ] * 1, // enforce Number (value may be Date)\r\n\t\t\tpoint_a_y = data[ a ][ 1 ] * 1;\r\n\r\n\t\tmax_area = area = -1;\r\n\r\n\t\tfor ( ; range_offs < range_to; range_offs++ ) {\r\n\t\t\t// Calculate triangle area over three buckets\r\n\t\t\tarea = abs( ( point_a_x - avg_x ) * ( data[ range_offs ][ 1 ] - point_a_y ) -\r\n\t\t\t\t\t\t( point_a_x - data[ range_offs ][ 0 ] ) * ( avg_y - point_a_y )\r\n\t\t\t\t\t  ) * 0.5;\r\n\t\t\tif ( area > max_area ) {\r\n\t\t\t\tmax_area = area;\r\n\t\t\t\tmax_area_point = data[ range_offs ];\r\n\t\t\t\tnext_a = range_offs; // Next a is this b\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tsampled[ sampled_index++ ] = max_area_point; // Pick this point from the bucket\r\n\t\ta = next_a; // This a is the next a (chosen b)\r\n\t}\r\n\r\n\tsampled[ sampled_index++ ] = data[ data_length - 1 ]; // Always add last\r\n\r\n\treturn sampled;\r\n}\r\n\r\n","/*!\n * Social Share Kit v1.0.15 (http://socialsharekit.com)\n * Copyright 2015 Social Share Kit / Kaspars Sprogis.\n * @Licensed under Creative Commons Attribution-NonCommercial 3.0 license:\n * https://github.com/darklow/social-share-kit/blob/master/LICENSE\n * ---\n */\nvar SocialShareKit=function(){function e(e){return b(e).share()}function t(e){\"loading\"!=document.readyState?e():document.addEventListener?document.addEventListener(\"DOMContentLoaded\",e):document.attachEvent(\"onreadystatechange\",function(){\"loading\"!=document.readyState&&e()})}function n(e){return document.querySelectorAll(e)}function r(e,t){for(var n=0;n<e.length;n++)t(e[n],n)}function o(e,t,n){e.addEventListener?e.addEventListener(t,n):e.attachEvent(\"on\"+t,function(){n.call(e)})}function i(e,t,n){e.removeEventListener?e.removeEventListener(t,n):e.detachEvent(\"on\"+t,n)}function a(e){return e.className.match(y)}function c(e){var t=e||window.event;return t.preventDefault?t.preventDefault():(t.returnValue=!1,t.cancelBubble=!0),t.currentTarget||t.srcElement}function s(e,t,n){var r,o,i,a;return t&&n?(o=document.documentElement.clientWidth/2-t/2,i=(document.documentElement.clientHeight-n)/2,a=\"status=1,resizable=yes,width=\"+t+\",height=\"+n+\",top=\"+i+\",left=\"+o,r=window.open(e,\"\",a)):r=window.open(e),r.focus(),r}function u(e,t,n){var r,o=h(e,t,n),i=d(e,t,n,o),a=\"undefined\"!=typeof o.title?o.title:l(t),c=\"undefined\"!=typeof o.text?o.text:p(t),s=o.image?o.image:f(\"og:image\"),u=\"undefined\"!=typeof o.via?o.via:f(\"twitter:site\"),m={shareUrl:i,title:a,text:c,image:s,via:u,options:e,shareUrlEncoded:function(){return encodeURIComponent(this.shareUrl)}};switch(t){case\"facebook\":r=\"https://www.facebook.com/share.php?u=\"+m.shareUrlEncoded();break;case\"twitter\":r=\"https://twitter.com/intent/tweet?url=\"+m.shareUrlEncoded()+\"&text=\"+encodeURIComponent(a+(c&&a?\" - \":\"\")+c),u&&(r+=\"&via=\"+u.replace(\"@\",\"\"));break;case\"google-plus\":r=\"https://plus.google.com/share?url=\"+m.shareUrlEncoded();break;case\"pinterest\":r=\"https://pinterest.com/pin/create/button/?url=\"+m.shareUrlEncoded()+\"&description=\"+encodeURIComponent(c),s&&(r+=\"&media=\"+encodeURIComponent(s));break;case\"tumblr\":r=\"https://www.tumblr.com/share/link?url=\"+m.shareUrlEncoded()+\"&name=\"+encodeURIComponent(a)+\"&description=\"+encodeURIComponent(c);break;case\"linkedin\":r=\"https://www.linkedin.com/shareArticle?mini=true&url=\"+m.shareUrlEncoded()+\"&title=\"+encodeURIComponent(a)+\"&summary=\"+encodeURIComponent(c);break;case\"vk\":r=\"https://vkontakte.ru/share.php?url=\"+m.shareUrlEncoded();break;case\"buffer\":r=\"https://buffer.com/add?source=button&url=\"+m.shareUrlEncoded()+\"&text=\"+encodeURIComponent(c);break;case\"email\":r=\"mailto:?subject=\"+encodeURIComponent(a)+\"&body=\"+encodeURIComponent(a+\"\\n\"+i+\"\\n\\n\"+c+\"\\n\")}return m.networkUrl=r,e.onBeforeOpen&&e.onBeforeOpen(n,t,m),m.networkUrl}function d(e,t,n,r){return r=r||h(e,t,n),r.url||window.location.href}function l(e){var t;return\"twitter\"==e&&(t=f(\"twitter:title\")),t||document.title}function p(e){var t;return\"twitter\"==e&&(t=f(\"twitter:description\")),t||f(\"description\")}function f(e,t){var r,o=n(\"meta[\"+(t?t:0===e.indexOf(\"og:\")?\"property\":\"name\")+'=\"'+e+'\"]');return o.length&&(r=o[0].getAttribute(\"content\")||\"\"),r||\"\"}function h(e,t,n){var r,o,i,a,c=[\"url\",\"title\",\"text\",\"image\"],s={},u=n.parentNode;\"twitter\"==t&&c.push(\"via\");for(a in c)o=c[a],i=\"data-\"+o,r=n.getAttribute(i)||u.getAttribute(i)||(e[t]&&\"undefined\"!=typeof e[t][o]?e[t][o]:e[o]),\"undefined\"!=typeof r&&(s[o]=r);return s}function m(e,t){var n=document.createElement(\"div\");n.innerHTML=t,n.className=\"ssk-num\",e.appendChild(n)}function w(e,t,n,r){var o,i,a,c=encodeURIComponent(t);switch(e){case\"facebook\":o=\"https://graph.facebook.com/?id=\"+c,i=function(e){return r(e.share?e.share.share_count:0)};break;case\"twitter\":n&&n.twitter&&n.twitter.countCallback&&n.twitter.countCallback(t,r);break;case\"google-plus\":return o=\"https://clients6.google.com/rpc?key=AIzaSyCKSbrvQasunBoV16zDH9R33D88CeLr9gQ\",a='[{\"method\":\"pos.plusones.get\",\"id\":\"p\",\"params\":{\"id\":\"'+t+'\",\"userId\":\"@viewer\",\"groupId\":\"@self\",\"nolog\":true},\"jsonrpc\":\"2.0\",\"key\":\"p\",\"apiVersion\":\"v1\"}]',i=function(e){if(e=JSON.parse(e),e.length)return r(e[0].result.metadata.globalCounts.count)},void v(o,i,a);case\"linkedin\":o=\"https://www.linkedin.com/countserv/count/share?url=\"+c,i=function(e){return r(e.count)};break;case\"pinterest\":o=\"https://api.pinterest.com/v1/urls/count.json?url=\"+c,i=function(e){return r(e.count)};break;case\"vk\":o=\"https://vk.com/share.php?act=count&url=\"+c,i=function(e){return r(e)};break;case\"buffer\":o=\"https://api.bufferapp.com/1/links/shares.json?url=\"+c,i=function(e){return r(e.shares)}}o&&i&&k(e,o,i,a)}function v(e,t,n){var r=new XMLHttpRequest;r.onreadystatechange=function(){4===this.readyState&&this.status>=200&&this.status<400&&t(this.responseText)},r.open(\"POST\",e,!0),r.setRequestHeader(\"Content-Type\",\"application/json\"),r.send(n)}function k(e,t,n){var r=\"cb_\"+e+\"_\"+Math.round(1e5*Math.random()),o=document.createElement(\"script\");return window[r]=function(e){try{delete window[r]}catch(e){}document.body.removeChild(o),n(e)},\"vk\"==e?window.VK={Share:{count:function(e,t){window[r](t)}}}:\"google-plus\"==e&&(window.services={gplus:{cb:window[r]}}),o.src=t+(t.indexOf(\"?\")>=0?\"&\":\"?\")+\"callback=\"+r,document.body.appendChild(o),!0}var b,g,y=/(twitter|facebook|google-plus|pinterest|tumblr|vk|linkedin|buffer|email)/,U=\"*|*\";return g=function(e){var t=e||{},r=t.selector||\".ssk\";this.nodes=n(r),this.options=t},g.prototype={share:function(){function e(e){var t,n=c(e),r=a(n),o=r[0];if(r&&(t=u(p,o,n))){if(window.twttr&&n.getAttribute(\"href\").indexOf(\"twitter.com/intent/\")!==-1)return void n.setAttribute(\"href\",t);if(\"email\"!==o){var i,d;\"buffer\"===o?(i=800,d=680):(i=575,d=400);var l=s(t,i,d);if(p.onOpen&&p.onOpen(n,o,t,l),p.onClose)var f=window.setInterval(function(){l.closed!==!1&&(window.clearInterval(f),p.onClose(n,o,t,l))},250)}else document.location=t}}function n(){var e,t;for(e in f)t=e.split(U),function(e){w(t[0],t[1],p,function(t){for(var n in e)m(e[n],t)})}(f[e])}var l=this.nodes,p=this.options,f={},h=function(){l.length&&(r(l,function(t){var n,r=a(t);if(r){if(t.getAttribute(\"data-ssk-ready\")){if(!p.reinitialize||!t._skkListener)return;i(t,\"click\",t._skkListener)}t.setAttribute(\"data-ssk-ready\",!0),o(t,\"click\",e),t._skkListener=e,t.parentNode.className.indexOf(\"ssk-count\")!==-1&&(r=r[0],n=r+U+d(p,r,t),n in f||(f[n]=[]),f[n].push(t))}}),n())};return p.forceInit===!0?h():t(h),this.nodes}},b=function(e){return new g(e)},{init:e}}();window.SocialShareKit=SocialShareKit;\n","// const filters = [\r\n//   {\r\n//     btn: document.getElementById('filter-music'),\r\n//     elements: document.querySelectorAll('.player--music')\r\n//   },\r\n//   {\r\n//     btn: document.getElementById('filter-mixes'),\r\n//     elements: document.querySelectorAll('.player--mix')\r\n//   }\r\n// ];\r\n\r\n// const handleClick = (index, e) => {\r\n//   e.preventDefault();\r\n//   const f = filters.slice();\r\n//   const filter = f.splice(index, 1)[0];\r\n//   const other = f[0];\r\n  \r\n//   const isFiltered = other.btn.classList.contains('filtered');\r\n//   filter.btn.classList.remove('filtered');\r\n//   other.btn.classList.remove('filtered');\r\n\r\n//   if(isFiltered) {\r\n//     // Remove this filter\r\n//     [].forEach.call(filter.elements, m => m.style.display = 'block');\r\n//     [].forEach.call(other.elements, m => m.style.display = 'block');\r\n//   } else {\r\n//     // Filter the other tracks\r\n//     other.btn.classList.add('filtered');\r\n//     [].forEach.call(filter.elements, m => m.style.display = 'block');\r\n//     [].forEach.call(other.elements, m => m.style.display = 'none');\r\n//   }\r\n// };\r\n\r\n// filters.forEach((filter, i) => {\r\n//   filter.btn.addEventListener('click', handleClick.bind(this, i));\r\n// });","require('social-share-kit');\r\n\r\nrequire('./filter');\r\nconst createWaveform = require('./waveform');\r\nrequire('./scss/style.scss');\r\n\r\nSocialShareKit.init();\r\n\r\nconst widgets = document.querySelectorAll('.player');\r\n[].forEach.call(widgets, el => {\r\n  const widget = SC.Widget(el.querySelector('.soundcloud-widget'));\r\n\r\n  const trackArtwork = el.querySelector('.track-artwork');\r\n  const trackTitle = el.querySelector('.track-title');\r\n  const trackWaveform = el.querySelector('.waveform');\r\n  const trackPermalink = el.querySelector('.track-permalink');\r\n  const btnPlay = el.querySelector('.btn-play');\r\n  const iconPlay = el.querySelector('.icon-play');\r\n  const iconPause = el.querySelector('.icon-pause');\r\n  const btnSharer = el.querySelector('.track-share');\r\n  const sharer = el.querySelector('.sharer');\r\n\r\n  const displayTrack = track => {\r\n    const artwork = track.artwork_url.replace('large', 't500x500');\r\n    trackArtwork.setAttribute('src', artwork);\r\n\r\n    const title = track.title;\r\n    const permalink = track.permalink_url;\r\n    trackTitle.textContent = title;\r\n    trackPermalink.setAttribute('href', permalink);\r\n\r\n    // Load the waveform JSON file\r\n    window.fetch(track.waveform_url)\r\n      .then(res => res.json())\r\n      .then(wave => {\r\n        createWaveform(trackWaveform, wave);\r\n        window.addEventListener('resize', () => createWaveform(trackWaveform, wave));\r\n      });\r\n    \r\n    // Update the links in the social sharer\r\n    const shareLinks = sharer.querySelectorAll('a');\r\n    let text = '';\r\n    if(title.indexOf('Can\\'t Wait Mix') == 0) {\r\n      text += 'Listen to this hour long mix of house, chill and world music!';\r\n    } else {\r\n      text += 'This track is worth a listen!';\r\n    }\r\n    [].forEach.call(shareLinks, link => {\r\n      link.dataset.title = title;\r\n      link.dataset.text = text;\r\n      link.dataset.url = permalink;\r\n      link.dataset.image = artwork;\r\n    });\r\n  };\r\n\r\n  widget.bind(SC.Widget.Events.READY, () => {\r\n    widget.getCurrentSound(displayTrack);\r\n  });\r\n  widget.bind(SC.Widget.Events.PLAY, () => {\r\n    iconPlay.style.display = 'none';\r\n    iconPause.style.display = 'block';\r\n  });\r\n  widget.bind(SC.Widget.Events.PAUSE, () => {\r\n    iconPause.style.display = 'none';\r\n    iconPlay.style.display = 'block';\r\n  });\r\n  widget.bind(SC.Widget.Events.PLAY_PROGRESS, player => {\r\n    const bars = trackWaveform.querySelectorAll('.bar');\r\n    const filled = Math.ceil(bars.length * player.relativePosition);\r\n    for(let i = 0; i < filled; i++) {\r\n      bars[i].style.background = el.dataset.color || '#FA03D8';\r\n    }\r\n  });\r\n\r\n  btnPlay.addEventListener('click', () => widget.toggle());\r\n\r\n  btnSharer.addEventListener('click', () => {\r\n    if(sharer.style.display !== 'flex') {\r\n      sharer.style.display = 'flex';\r\n    } else {\r\n      sharer.style.display = 'none';\r\n    }\r\n  });\r\n});","// extracted by mini-css-extract-plugin","const downsampler = require('downsample-lttb');\r\n\r\n/**\r\n * @param {Node} el The waveform element\r\n * @param {array} waveform The waveform JSON\r\n */\r\nconst createWaveform = (el, waveform) => {\r\n  // Empty waveform element\r\n  while (el.hasChildNodes()) {\r\n    el.removeChild(el.lastChild);\r\n  }\r\n\r\n  // The amount of bars the waveform can hold in the current viewport\r\n  const maxBars = Math.round(el.offsetWidth / 5);\r\n\r\n  // Convert samples into graph plots [1, 140], [2, 90]\r\n  let samples = waveform.samples.map((s, i) => [i, s]);\r\n  // Resample array to the amount of bars we want\r\n  samples = downsampler.processData(samples, maxBars);\r\n  // Convert graph plots back into int array\r\n  samples = samples.map(s => s[1]);\r\n\r\n  samples.forEach(sample => {\r\n    const bar = document.createElement('div');\r\n    bar.classList.add('bar');\r\n    bar.style.height = (40 * (sample / waveform.height)) + 'px';\r\n    el.appendChild(bar);\r\n  });\r\n};\r\n\r\nmodule.exports = createWaveform;"],"sourceRoot":""}